$(function(){$.validator.addMethod("validtoken",function(f,e){var d=this.optional(e)||/^[a-z]{5,15}$/.test(f);return d},"Your token's between 5 and 15 characters.<br />It doesn't have any numbers or strange characters.");$.validator.addMethod("vcfextension",function(f,e){var d=this.optional(e)||/^.*.\.vcf$/i.test(f);return d},"You need to upload a VCF file. It should end in '.vcf'");$("#tokencheck").validate({rules:{token:{required:true,validtoken:true}},messages:{token:{required:"You need to give me a token"}},errorContainer:"#tokencheck-messages",errorLabelContainer:"#tokencheck-messages",errorElement:"span",wrapper:""});$("#vcfupload").validate({rules:{vcf:{required:true,vcfextension:true}},messages:{vcf:{required:"You need to specify an input file"}},errorContainer:"#vcfupload-messages",errorLabelContainer:"#vcfupload-messages",errorElement:"span",wrapper:""});var c=$(".bar");var b=$(".percent");var a=$("#visual-progress");b.html("0%");$("#vcfupload").ajaxForm({beforeSend:function(){var d="0%";c.width(d);b.html(d);a.slideDown();$(".hide-after-submit").hide();$("#submit").attr("disabled","disabled");$("#token-submit").attr("disabled","disabled")},uploadProgress:function(h,d,g,f){var e=f+"%";c.width(e);b.html(e)},complete:function(d){$(".hide-after-submit ").fadeOut();window.location.href="/token/"+d.getResponseHeader("token")}})});